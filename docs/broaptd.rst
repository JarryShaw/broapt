=======
broaptd
=======

-------------
BroAPT Daemon
-------------

:Version: v1.0
:Date: June 09, 2019
:Manual section: 8
:Author:
    Jarry Shaw, a newbie programmer, is the author, owner and maintainer
    of the *BroAPT* project. Please contact me at *jarryshaw@icloud.com*.
:Copyright:
    *BroAPT* is licensed under the
    **Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License**.

SYNOPSIS
========

broaptd [-h] [-v] [-e ENV] [-s SIGNAL] [-t HOST] [-p PORT]
        [-c DOCKER_COMPOSE] [-d DUMP_PATH] [-l LOGS_PATH] [-r API_ROOT]
        [-a API_LOGS] [-i INTERVAL] [-m MAX_RETRY]

SUMMARY
=======

We hereby describe BroAPT system, an APT detection system based on Bro IDS. The
system monitors APT based on comprehensive analysis of the network traffic. It
is granted with high performance and extensibility. It can reassemble then
extract files transmitted in the traffic, analyse and generate log files in
real-time; it can also classify extracted files through targeted malicious file
detection configuration; and it detects APT attacks based on analysis of the log
files generated by the system itself.

OPTIONS
=======

optional arguments
------------------

-h, --help              show this help message and exit
-v, --version           show program's version number and exit

environment arguments
---------------------

-e *ENV*, --env *ENV*   path to ``dotenv`` file

-s *SIGNAL*, --signal *SIGNAL*
                        daemon kill signal

server arguments
----------------

-t *HOST*, --host *HOST*
                        the hostname to listen on

-p *PORT*, --port *PORT*
                        the port of the webserver

compose arguments
-----------------

-f *DOCKER_COMPOSE*, --docker-compose *DOCKER_COMPOSE*
                        path to BroAPT's compose file

-d *DUMP_PATH*, --dump-path *DUMP_PATH*
                        path to extracted files

-l *LOGS_PATH*, --logs-path *LOGS_PATH*
                        path to log files

API arguments
-------------

-r *API_ROOT*, --api-root *API_ROOT*
                        path to detection APIs

-a *API_LOGS*, --api-logs *API_LOGS*
                        path to API runtime logs

runtime arguments
-----------------

-i *INTERVAL*, --interval *INTERVAL*
                        sleep interval

-m *MAX_RETRY*, --max-retry *MAX_RETRY*
                        command retry

ENVIRONMENT
===========

:BROAPT_KILL_SIGNAL:
    daemon kill signal

    *default*: ``15`` (``TERM``, software termination signal)

:BROAPT_SERVER_HOST:
    the hostname to listen on

    *default*: ``0.0.0.0``

:BROAPT_SERVER_PORT:
    the port of the webserver

    *default*: ``5000``

:BROAPT_DOCKER_COMPOSE:
    path to BroAPT's compose file

    *default*: ``docker-compose.yml``

:BROAPT_DUMP_PATH:
    path to extracted files

:BROAPT_LOGS_PATH:
    path to log files

:BROAPT_API_ROOT:
    path to detection APIs

:BROAPT_API_LOGS:
    path to API runtime logs

:BROAPT_INTERVAL:
    sleep interval

    *default*: ``10`` seconds

:BROAPT_MAX_RETRY:
    command retry

    *default*: ``3``

FILES
=====

:/etc/sysconfig/broaptd:
    This file is the default ``dotenv`` file. It may contain environment
    variables as specified in the **ENVIRONMENT** section, which will be the
    default value for corresponding CLI arguments in the **OPTIONS** section.

:/usr/lib/systemd/system/broaptd.service:
    This file is the registered BroAPT Daemon service file under
    ``systemd(1)``.

SEE ALSO
========

``systemd(1)``, ``systemctl(1)``, ``service(8)``
